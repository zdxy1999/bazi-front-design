# 边缘光晕效果实现指南

## 概述

本文档记录了从 `background.html` 复制边缘光晕效果到新页面时的关键要点和常见问题解决方案。

---

## 一、背景效果的三大核心

`background.html` 的视觉效果由**三个核心部分**组成，每一部分都有其特定的作用和实现方式：

---

### 1.1 背景光晕（旋转光晕）

#### 作用
- 5个不同颜色的光球在屏幕上围绕中心点旋转运动
- 创造动态、流动的视觉效果
- 每个光球对应一个边缘高光颜色

#### 实现方式

**HTML 结构：**
```html
<div class="orbiting-glow orbiting-glow-1"></div>
<div class="orbiting-glow orbiting-glow-2"></div>
<div class="orbiting-glow orbiting-glow-3"></div>
<div class="orbiting-glow orbiting-glow-4"></div>
<div class="orbiting-glow orbiting-glow-5"></div>
```

**CSS 样式：**
```css
.orbiting-glow {
    position: absolute;
    width: calc(var(--spotlight-size) * 1.5);  /* 光晕大小 */
    height: calc(var(--spotlight-size) * 1.5);
    border-radius: 50%;
    z-index: 55;
    background: radial-gradient(
        circle,
        hsl(var(--glow-hue, 0) calc(var(--glow-saturation, 100) * 1%) calc(var(--glow-lightness) * 1%) / 0.6),
        transparent 70%
    );
    filter: blur(20px);  /* 模糊效果 */
    opacity: 0.4;
    transform-origin: center center;
    animation: breathe 3s ease-in-out infinite;  /* 呼吸动画 */
}
```

**运动机制：**
- 5个光晕以等角度间隔（72°）围绕中心旋转
- 旋转半径：`orbitRadius = 160px`
- 旋转速度：`rotationSpeed = 0.008` 弧度/帧
- 中心点会随机漂移，创造更自然的运动轨迹

**动画效果：**
```css
@keyframes breathe {
    0%, 100% {
        opacity: 0.2;
        transform: scale(0.9);
    }
    50% {
        opacity: 0.6;
        transform: scale(1.1);
    }
}
```

**5个光晕的颜色配置：**

| 光晕 | 颜色 | 色相(Hue) | 饱和度 | 亮度 | 动画周期 |
|------|------|-----------|--------|------|---------|
| orbiting-glow-1 | 红色 | 0° | 70% | 20% | 2.5s |
| orbiting-glow-2 | 黄色 | 60° | 90% | 30% | 3.2s |
| orbiting-glow-3 | 绿色 | 120° | 90% | 20% | 4s |
| orbiting-glow-4 | 蓝色 | 210° | 90% | 30% | 2.8s |
| orbiting-glow-5 | 白色 | 0° | 0% | 30% | 3.5s |

---

### 1.2 边缘高光

#### 作用
- 当旋转光晕靠近屏幕边缘时，在对应边缘位置显示彩色光晕
- 通过距离计算实现"近亮远暗"的动态效果
- 5个边缘高光分别对应5个旋转光晕的颜色

#### 工作原理

**距离检测：**
```javascript
// 计算光晕到四边的距离
const distToLeft = glowCenterX - cardRect.left;
const distToRight = cardRect.right - glowCenterX;
const distToTop = glowCenterY - cardRect.top;
const distToBottom = cardRect.bottom - glowCenterY;

// 找到最近的边
const minDist = Math.min(distToLeft, distToRight, distToTop, distToBottom);
```

**透明度计算：**
```javascript
// 距离越近越亮，距离越远越暗
let edgeOpacity = Math.max(0, 1 - (minDist / maxDistance));
edgeOpacity = edgeOpacity * edgeOpacity;  // 平滑过渡
edgeOpacity = Math.min(3, edgeOpacity);  // 最大透明度3

// 浅色模式下增加亮度
if (document.body.classList.contains('light-theme')) {
    edgeOpacity *= 5;
}
```

#### 实现方式

**HTML 结构：**
```html
<div class="card-glow-highlight-1"></div>
<div class="card-glow-highlight-2"></div>
<div class="card-glow-highlight-3"></div>
<div class="card-glow-highlight-4"></div>
<div class="card-glow-highlight-5"></div>
```

**CSS 关键点：**
```css
.card-glow-highlight-1::before {
    --glow-hue: var(--orbit-glow-1-hue);
    --glow-saturation: var(--orbit-glow-1-saturation);
    --glow-lightness: var(--orbit-glow-1-lightness);
    background-image: radial-gradient(
        calc(var(--spotlight-size) * 0.6) calc(var(--spotlight-size) * 0.6) at
        calc(var(--highlight-x-1, 960) * 1px)
        calc(var(--highlight-y-1, 540) * 1px),
        hsl(var(--glow-hue, 0) calc(var(--glow-saturation, 100) * 1%) calc(var(--glow-lightness, 50) * 1%) / 0.7),
        transparent 100%
    );
    opacity: var(--orbit-edge-opacity-1);  /* JS动态更新 */
}
```

**关键技术：`background-attachment: fixed`**
- 让背景图相对于视口（viewport）固定
- 即使元素被其他层遮挡，背景图仍然可见
- 这是边缘高光能穿透上层遮罩的关键

**CSS 变量动态更新：**
```javascript
// JavaScript 实时更新位置和透明度
document.documentElement.style.setProperty(`--highlight-x-${highlightIndex}`, highlightX.toFixed(2));
document.documentElement.style.setProperty(`--highlight-y-${highlightIndex}`, highlightY.toFixed(2));
document.documentElement.style.setProperty(`--orbit-edge-opacity-${highlightIndex}`, edgeOpacity.toFixed(2));
```

---

### 1.3 两种主题（深色/浅色）

#### 深色主题（默认）

**背景：**
```css
body {
    background: linear-gradient(135deg, #000000 0%, #0a0a0f 100%);
}

.card-glow-inner {
    background: linear-gradient(135deg, #000000 0%, #0a0a0f 100%);
}
```

**光晕效果：**
- 光晕饱和度：70-90%
- 光晕亮度：20-30%（较暗，适合深色背景）
- 边缘高光最大透明度：3
- 整体效果：柔和、神秘

**可见性蒙版：**
```css
.glow-visibility-mask {
    background: radial-gradient(
        circle at center,
        rgba(0, 0, 0, 1) 0%,       /* 中心完全不透明（黑色） */
        rgba(0, 0, 0, 1) 50%,
        rgba(0, 0, 0, 0.9) 65%,
        rgba(0, 0, 0, 0.6) 80%,
        rgba(0, 0, 0, 0.2) 90%,
        rgba(0, 0, 0, 0) 95%       /* 边缘完全透明 */
    );
}
```

#### 浅色主题

**触发方式：**
```javascript
// 切换主题
body.classList.add('light-theme');
localStorage.setItem('theme', 'light');
```

**背景：**
```css
body.light-theme {
    background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
}

body.light-theme .card-glow-inner {
    background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
}
```

**光晕效果增强：**
```css
body.light-theme {
    /* 提高饱和度和亮度，让光晕在浅色背景上更明显 */
    --orbit-glow-1-saturation: 100;  /* 从 70 提高到 100 */
    --orbit-glow-1-lightness: 40;     /* 从 20 提高到 40 */
    --orbit-glow-2-saturation: 100;  /* 从 90 提高到 100 */
    --orbit-glow-2-lightness: 50;     /* 从 30 提高到 50 */
    /* ... 其他光晕同理 */
    --orbit-glow-5-lightness: 70;     /* 白色光晕更亮 */
}
```

**边缘高光增强：**
```css
body.light-theme .card-glow-highlight-1::before,
body.light-theme .card-glow-highlight-2::before,
body.light-theme .card-glow-highlight-3::before,
body.light-theme .card-glow-highlight-4::before {
    filter: brightness(2) saturate(1.5);  /* 提高亮度和饱和度 */
}

body.light-theme .card-glow-highlight-5::before {
    filter: brightness(1.5) saturate(0.5);  /* 白色光晕 */
}
```

**可见性蒙版：**
```css
body.light-theme .glow-visibility-mask {
    background: radial-gradient(
        circle at center,
        rgba(255, 255, 255, 0.6) 0%,   /* 中心半透明（白色） */
        rgba(255, 255, 255, 0.5) 40%,
        rgba(255, 255, 255, 0.3) 60%,
        rgba(255, 255, 255, 0.1) 80%,
        rgba(255, 255, 255, 0) 90%     /* 边缘完全透明 */
    );
}
```

**透明度倍增：**
```javascript
// JavaScript 中对浅色主题的处理
if (document.body.classList.contains('light-theme')) {
    edgeOpacity *= 5;  // 浅色模式下透明度翻5倍
}
```

**整体效果：** 明亮、清新

#### 主题切换动画

所有主题相关的样式都设置了过渡效果：
```css
body {
    transition: background 0.5s ease;
}

.card-glow-inner {
    transition: background 0.5s ease;
}

.glow-visibility-mask {
    transition: background 0.5s ease;
}
```

这确保主题切换时，所有颜色平滑过渡，不会突兀跳变。

---

### 1.4 三大核心的协同工作

```
┌─────────────────────────────────────────────────────┐
│                   可见性蒙版 (z: 60)              │
│  ┌───────────────────────────────────────────────┐  │
│  │             内部遮罩层 (z: 50)             │  │
│  │  ┌─────────────────────────────────────────┐  │  │
│  │  │          边缘高光层 (z: 45)          │  │  │
│  │  │  ● ● ● ● ●  (旋转光晕 z: 55)        │  │  │
│  │  │         ↕️  (JS 计算距离)             │  │  │
│  │  │    ↖️ ↗️ ↙️ ↘️  (边缘高光显示)      │  │  │
│  │  └─────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

**工作流程：**
1. **旋转光晕** 在屏幕上运动
2. **JavaScript** 计算每个光晕到边缘的距离
3. **边缘高光层** 根据 CSS 变量显示/隐藏
4. **内部遮罩** 遮挡中心区域
5. **可见性蒙版** 让边缘更明显
6. **主题系统** 控制整体颜色方案

---

## 二、边缘光晕效果技术实现

### 核心机制总结

边缘光晕效果由以下部分组成：

1. **旋转光晕** - 5个彩色光球围绕中心旋转
2. **边缘高光层** - 当光晕靠近屏幕边缘时，在边缘显示对应颜色的光晕
3. **内部遮罩层** - 遮挡中心区域，只让边缘可见
4. **可见性蒙版** - 使用径向渐变，中心不透明、边缘透明
5. **主题系统** - 深色/浅色两种模式，自动适配

### 关键技术点

- 使用 `background-attachment: fixed` 让背景图相对于视口固定
- 通过 JavaScript 计算光晕与边缘的距离，动态更新 CSS 变量
- 利用 z-index 层级和 inset 值控制各层的显示关系
- 使用 CSS 变量实现主题切换和动态效果

---

## 二、必要的 HTML 结构

```html
<div class="background-container">
    <!-- 边缘光晕层容器 -->
    <div class="card-glow-border"></div>

    <!-- 内部遮罩层 -->
    <div class="card-glow-inner"></div>

    <!-- 5个边缘高光层，每个对应一个旋转光晕的颜色 -->
    <div class="card-glow-highlight-1"></div>
    <div class="card-glow-highlight-2"></div>
    <div class="card-glow-highlight-3"></div>
    <div class="card-glow-highlight-4"></div>
    <div class="card-glow-highlight-5"></div>

    <!-- 5个旋转光晕 -->
    <div class="orbiting-glow orbiting-glow-1"></div>
    <div class="orbiting-glow orbiting-glow-2"></div>
    <div class="orbiting-glow orbiting-glow-3"></div>
    <div class="orbiting-glow orbiting-glow-4"></div>
    <div class="orbiting-glow orbiting-glow-5"></div>

    <!-- 可见性蒙版 -->
    <div class="glow-visibility-mask"></div>
</div>
```

**重要：** 元素顺序必须正确，因为同层级元素的堆叠依赖于 HTML 顺序。

---

## 三、关键 CSS 配置

### 3.1 背景容器（⚠️ 最容易出错的地方）

```css
.background-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    /* ⚠️ 不要设置 overflow: hidden，否则边缘高光会被裁剪！ */
}
```

**常见错误：** 设置 `overflow: hidden` 会导致边缘高光层被裁剪，看不到效果。

### 3.2 内部遮罩层（⚠️ inset 值很关键）

```css
.card-glow-inner {
    position: absolute;
    inset: 4px;  /* ⚠️ 必须是 4px，不是 0！ */
    background: linear-gradient(135deg, #000000 0%, #0a0a0f 100%);
    z-index: 50;
    opacity: 1;
    pointer-events: none;
    transition: background 0.5s ease;
}
```

**为什么是 `inset: 4px`？**
- 边缘高光层使用 `inset: 0`，覆盖整个容器
- 内部遮罩使用 `inset: 4px`，不覆盖边缘 4px
- 这样边缘高光在边缘 4px 区域内可见（配合 `background-attachment: fixed` 效果更好）

### 3.3 边缘高光层（核心层）

```css
.card-glow-highlight-1,
.card-glow-highlight-2,
.card-glow-highlight-3,
.card-glow-highlight-4,
.card-glow-highlight-5 {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 45;  /* ⚠️ 必须低于 card-glow-inner */
    border-radius: 0;
    overflow: hidden;
}

/* 边缘高光内部的光晕层 */
.card-glow-highlight-1::before,
.card-glow-highlight-2::before,
.card-glow-highlight-3::before,
.card-glow-highlight-4::before,
.card-glow-highlight-5::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 0;
    pointer-events: none;
    background-attachment: fixed;  /* ⚠️ 关键属性！ */
    background-size: cover;
    background-repeat: no-repeat;
    background-position: 50% 50%;
}
```

**`background-attachment: fixed` 的作用：**
- 让背景图相对于视口（viewport）固定，而不是相对于元素
- 即使元素被其他层遮挡，背景图仍然可见
- 这是边缘高光能显示的关键

### 3.4 完整的 z-index 层级

| 元素 | z-index | 说明 |
|------|----------|------|
| `.background-container` | 0 | 背景容器 |
| `.card-glow-border` | 10 | 边缘光晕层容器 |
| `.card-glow-highlight-1~5` | 45 | 边缘高光层（5个） |
| `.card-glow-inner` | 50 | 内部遮罩层 |
| `.orbiting-glow-1~5` | 55 | 旋转光晕（5个） |
| `.glow-visibility-mask` | 60 | 可见性蒙版（最上层） |
| 主内容容器 | 100 | 页面内容 |

**⚠️ 常见错误：** `.glow-visibility-mask` 的 z-index 设置为 40 会导致层级混乱。

---

## 四、CSS 变量配置

### 4.1 必需的 CSS 变量

```css
:root {
    --spotlight-size: 200px;

    /* 5个旋转光晕的颜色配置 */
    --orbit-glow-1-hue: 0;      /* 红色 */
    --orbit-glow-1-saturation: 70;
    --orbit-glow-1-lightness: 20;
    --orbit-edge-opacity-1: 0;  /* 边缘高光透明度（JS动态更新） */

    --orbit-glow-2-hue: 60;     /* 黄色 */
    --orbit-glow-2-saturation: 90;
    --orbit-glow-2-lightness: 30;
    --orbit-edge-opacity-2: 0;

    --orbit-glow-3-hue: 120;    /* 绿色 */
    --orbit-glow-3-saturation: 90;
    --orbit-glow-3-lightness: 20;
    --orbit-edge-opacity-3: 0;

    --orbit-glow-4-hue: 210;    /* 蓝色 */
    --orbit-glow-4-saturation: 90;
    --orbit-glow-4-lightness: 30;
    --orbit-edge-opacity-4: 0;

    --orbit-glow-5-hue: 0;      /* 白色 */
    --orbit-glow-5-saturation: 0;
    --orbit-glow-5-lightness: 30;
    --orbit-edge-opacity-5: 0;

    /* 边缘高光位置变量（JS动态更新） */
    --highlight-x-1: 960;
    --highlight-y-1: 540;
    --highlight-x-2: 960;
    --highlight-y-2: 540;
    --highlight-x-3: 960;
    --highlight-y-3: 540;
    --highlight-x-4: 960;
    --highlight-y-4: 540;
    --highlight-x-5: 960;
    --highlight-y-5: 540;
}
```

### 4.2 浅色主题增强

```css
body.light-theme {
    --orbit-glow-1-saturation: 100;
    --orbit-glow-1-lightness: 40;
    --orbit-glow-2-saturation: 100;
    --orbit-glow-2-lightness: 50;
    --orbit-glow-3-saturation: 100;
    --orbit-glow-3-lightness: 40;
    --orbit-glow-4-saturation: 100;
    --orbit-glow-4-lightness: 50;
    --orbit-glow-5-lightness: 70;
}
```

---

## 五、JavaScript 实现要点

### 5.1 必需的函数

```javascript
// 1. 更新随机运动中心点
function updateRandomCenter() { }

// 2. 更新旋转光晕位置
function updateOrbitingGlows() { }

// 3. ⚠️ 关键函数：更新边缘高光
function updateEdgeHighlight() { }

// 4. 旋转动画循环
function animateRotation() {
    rotationAngle += rotationSpeed;
    updateRandomCenter();
    updateOrbitingGlows();
    updateEdgeHighlight();  // ⚠️ 必须调用！
    requestAnimationFrame(animateRotation);
}
```

### 5.2 边缘高光更新函数详解

```javascript
function updateEdgeHighlight() {
    const glows = document.querySelectorAll('.orbiting-glow');
    const card = document.querySelector('.background-container');
    const cardRect = card.getBoundingClientRect();

    const maxDistance = 300; // 光晕影响范围的最大距离

    glows.forEach((glow, index) => {
        const rect = glow.getBoundingClientRect();
        const glowCenterX = rect.left + rect.width / 2;
        const glowCenterY = rect.top + rect.height / 2;

        // 计算到卡片四边的距离
        const distToLeft = glowCenterX - cardRect.left;
        const distToRight = cardRect.right - glowCenterX;
        const distToTop = glowCenterY - cardRect.top;
        const distToBottom = cardRect.bottom - glowCenterY;

        // 找到最近的边
        const minDist = Math.min(distToLeft, distToRight, distToTop, distToBottom);

        // 根据距离计算透明度：距离越近越亮
        let edgeOpacity = Math.max(0, 1 - (minDist / maxDistance));
        edgeOpacity = edgeOpacity * edgeOpacity; // 平滑过渡
        edgeOpacity = Math.min(3, edgeOpacity);  // 最大透明度

        // 浅色模式下增加亮度
        if (document.body.classList.contains('light-theme')) {
            edgeOpacity *= 5;
        }

        // 设置边缘高光的位置
        let highlightX = glowCenterX;
        let highlightY = glowCenterY;

        if (minDist === distToLeft) {
            highlightX = cardRect.left;
        } else if (minDist === distToRight) {
            highlightX = cardRect.right;
        } else if (minDist === distToTop) {
            highlightY = cardRect.top;
        } else {
            highlightY = cardRect.bottom;
        }

        // ⚠️ 关键：更新 CSS 变量
        const highlightIndex = index + 1;
        document.documentElement.style.setProperty(`--highlight-x-${highlightIndex}`, highlightX.toFixed(2));
        document.documentElement.style.setProperty(`--highlight-y-${highlightIndex}`, highlightY.toFixed(2));
        document.documentElement.style.setProperty(`--orbit-edge-opacity-${highlightIndex}`, edgeOpacity.toFixed(2));
    });
}
```

---

## 六、从 background.html 新建页面的步骤

### 步骤 1：复制背景相关代码

从 `background.html` 复制以下内容到新页面：

1. **CSS 部分：**
   - `:root` 中的所有 CSS 变量
   - `.background-container` 及其所有子元素的样式
   - 旋转光晕的 `@keyframes breathe` 动画

2. **HTML 部分：**
   - 整个 `.background-container` 结构及其内部的所有 div

3. **JavaScript 部分：**
   - 旋转光晕的配置变量
   - `updateRandomCenter()` 函数
   - `updateOrbitingGlows()` 函数
   - `updateEdgeHighlight()` 函数
   - `animateRotation()` 函数
   - 启动动画的调用

### 步骤 2：调整 z-index

确保主内容容器的 z-index 高于背景层：

```css
.main-container {
    position: relative;
    z-index: 100;  /* 高于 .glow-visibility-mask 的 60 */
}
```

### 步骤 3：检查常见错误

使用下面的检查清单验证配置。

---

## 七、检查清单

在新建页面后，按此清单检查：

### CSS 检查

- [ ] `.background-container` 没有 `overflow: hidden`
- [ ] `.background-container` 有 `position: fixed; inset: 0;`
- [ ] `.card-glow-inner` 的 `inset: 4px`（不是 0）
- [ ] `.card-glow-inner` 的 `z-index: 50`
- [ ] `.card-glow-highlight-1~5` 的 `z-index: 45`
- [ ] `.glow-visibility-mask` 的 `z-index: 60`
- [ ] 所有 `.card-glow-highlight-N::before` 有 `background-attachment: fixed`
- [ ] 主内容容器的 `z-index` 大于 60

### HTML 检查

- [ ] `.background-container` 包含所有必要的 div
- [ ] 元素顺序正确（border → inner → highlight → orbiting → mask）
- [ ] 每个光晕都有对应的 highlight div（1-5）

### JavaScript 检查

- [ ] `animateRotation()` 中调用了 `updateEdgeHighlight()`
- [ ] `updateEdgeHighlight()` 使用 `.background-container` 获取边界
- [ ] CSS 变量名正确（`--highlight-x-N`, `--orbit-edge-opacity-N`）

### 效果检查

- [ ] 旋转光晕在运动
- [ ] 光晕靠近边缘时，边缘出现对应颜色的高光
- [ ] 主题切换正常工作
- [ ] 浅色主题下边缘高光更亮

---

## 八、常见问题及解决方案

### 问题 1：看不到边缘高光

**症状：** 旋转光晕正常，但边缘没有彩色高光。

**排查步骤：**

1. 检查 `.background-container` 是否有 `overflow: hidden`
   ```css
   /* 错误 */
   .background-container {
       overflow: hidden;  /* ❌ 会裁剪边缘高光 */
   }

   /* 正确 */
   .background-container {
       /* 不设置 overflow，或设置为 visible */
   }
   ```

2. 检查 `.card-glow-inner` 的 `inset` 值
   ```css
   /* 错误 */
   .card-glow-inner {
       inset: 0;  /* ❌ 会完全覆盖边缘高光 */
   }

   /* 正确 */
   .card-glow-inner {
       inset: 4px;  /* ✅ 留出边缘空间 */
   }
   ```

3. 检查 z-index 层级
   ```css
   /* 确保层级正确 */
   .card-glow-highlight-N { z-index: 45; }
   .card-glow-inner { z-index: 50; }
   .glow-visibility-mask { z-index: 60; }
   ```

4. 检查 JavaScript 是否调用 `updateEdgeHighlight()`
   ```javascript
   function animateRotation() {
       rotationAngle += rotationSpeed;
       updateRandomCenter();
       updateOrbitingGlows();
       updateEdgeHighlight();  // ⚠️ 必须有这行
       requestAnimationFrame(animateRotation);
   }
   ```

5. 使用浏览器开发者工具检查 CSS 变量是否更新
   - 打开开发者工具
   - 选择 `:root` 元素
   - 检查 `--orbit-edge-opacity-1` 等变量的值
   - 值应该随光晕位置变化（0 到 3 之间）

### 问题 2：边缘高光很暗

**症状：** 能看到边缘高光，但非常暗淡。

**解决方案：**

检查浅色主题配置：
```css
body.light-theme {
    --orbit-glow-1-saturation: 100;  /* 提高饱和度 */
    --orbit-glow-1-lightness: 40;    /* 提高亮度 */
    /* ... 其他光晕同理 */
}
```

检查 JavaScript 中的透明度计算：
```javascript
// 浅色模式下应该乘以更大的系数
if (document.body.classList.contains('light-theme')) {
    edgeOpacity *= 5;  // 浅色模式下更亮
}
```

### 问题 3：边缘高光位置不对

**症状：** 边缘高光出现在错误的位置。

**解决方案：**

检查 `updateEdgeHighlight()` 中使用的容器：
```javascript
// 确保使用正确的容器
const card = document.querySelector('.background-container');
const cardRect = card.getBoundingClientRect();
```

### 问题 4：主题切换后边缘高光消失

**症状：** 深色主题正常，切换到浅色主题后边缘高光不可见。

**解决方案：**

检查浅色主题的样式覆盖：
```css
body.light-theme .card-glow-highlight-1::before,
body.light-theme .card-glow-highlight-2::before,
body.light-theme .card-glow-highlight-3::before,
body.light-theme .card-glow-highlight-4::before {
    filter: brightness(2) saturate(1.5);  /* 提高亮度和饱和度 */
}

body.light-theme .card-glow-highlight-5::before {
    filter: brightness(1.5) saturate(0.5);  /* 白色光晕 */
}
```

---

## 九、完整示例代码

参考文件：
- `/background/background.html` - 完整的边缘光晕效果示例
- `/bazi-analize-detail.html` - 成功实现边缘光晕的内容页面

---

## 十、快速参考

### 关键值速查

| 属性 | 值 | 说明 |
|------|-----|------|
| `.background-container` 的 `overflow` | 不设置或 `visible` | ⚠️ 不能是 `hidden` |
| `.card-glow-inner` 的 `inset` | `4px` | ⚠️ 不能是 `0` |
| `.card-glow-inner` 的 `z-index` | `50` | 中层 |
| `.card-glow-highlight-N` 的 `z-index` | `45` | 低于 inner |
| `.glow-visibility-mask` 的 `z-index` | `60` | 最高层 |
| `background-attachment` | `fixed` | ⚠️ 必需 |
| 主内容的 `z-index` | `> 60` | 如 `100` |

### 5个光晕颜色速查

| 编号 | 颜色 | Hue | Saturation | Lightness |
|------|------|-----|-----------|-----------|
| 1 | 红色 | 0 | 70% | 20% |
| 2 | 黄色 | 60 | 90% | 30% |
| 3 | 绿色 | 120 | 90% | 20% |
| 4 | 蓝色 | 210 | 90% | 30% |
| 5 | 白色 | 0 | 0% | 30% |

---

## 更新日志

- 2025-01-XX: 初始版本，记录边缘光晕效果的实现要点和常见问题
- 解决了 `.background-container` 的 `overflow: hidden` 问题
- 解决了 `.card-glow-inner` 的 `inset` 值错误
- 解决了 `.glow-visibility-mask` 的 z-index 错误
